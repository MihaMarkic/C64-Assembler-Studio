<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:svg="clr-namespace:Avalonia.Svg.Skia;assembly=Avalonia.Svg.Skia"
             xmlns:vm="clr-namespace:C64AssemblerStudio.Engine.ViewModels;assembly=C64AssemblerStudio.Engine"
             xmlns:v="clr-namespace:C64AssemblerStudio.Desktop.Views"
             xmlns:vs="clr-namespace:C64AssemblerStudio.Desktop.Views.Settings"
             xmlns:c="clr-namespace:C64AssemblerStudio.Desktop.Converters"
             xmlns:ctl="clr-namespace:C64AssemblerStudio.Desktop.Controls"
             xmlns:mv="clr-namespace:C64AssemblerStudio.Desktop.Views.Main"
             xmlns:fv="clr-namespace:C64AssemblerStudio.Desktop.Views.Files"
             xmlns:tools="clr-namespace:C64AssemblerStudio.Desktop.Views.Tools"
             xmlns:tvm="clr-namespace:C64AssemblerStudio.Engine.ViewModels.Tools;assembly=C64AssemblerStudio.Engine"
             xmlns:breakpoints="clr-namespace:C64AssemblerStudio.Engine.ViewModels.Breakpoints;assembly=C64AssemblerStudio.Engine"
             xmlns:project="clr-namespace:C64AssemblerStudio.Engine.ViewModels.Projects;assembly=C64AssemblerStudio.Engine"
             xmlns:docks="clr-namespace:C64AssemblerStudio.Engine.ViewModels.Docks;assembly=C64AssemblerStudio.Engine"
             xmlns:dockControls="clr-namespace:Dock.Model.Mvvm.Controls;assembly=Dock.Model.Mvvm"
             mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="350"
             x:Class="C64AssemblerStudio.Desktop.Views.Main.MainContent"
             x:DataType="vm:MainViewModel">
    <UserControl.Resources>
        <c:FirstNonNullConverter x:Key="FirstNonNullConverter" />
        <c:BoolToStringConverter x:Key="StepModeConverter" OnTrue="ASM" OnFalse="HIGH" />
    </UserControl.Resources>
    <UserControl.DataTemplates>
        <DataTemplate DataType="vm:SettingsViewModel">
            <vs:Settings />
        </DataTemplate>
        <DataTemplate DataType="vm:AboutViewModel">
            <v:About />
        </DataTemplate>
        <DataTemplate DataType="project:IProjectViewModel">
            <vs:ProjectSettings />
        </DataTemplate>
        <!--<DataTemplate DataType="vm:DebuggerViewModel">
      <v:Debugger />
    </DataTemplate>-->
    </UserControl.DataTemplates>
    <DockPanel x:Name="Source" LastChildFill="True" Margin="4">
        <mv:MainMenu DockPanel.Dock="Top" />
        <mv:MainToolbar DockPanel.Dock="Top" />
        <Grid RowDefinitions="*,Auto">
            <DockControl Layout="{Binding Layout}" IsVisible="True">
                <DockControl.DataTemplates>
                    <DataTemplate x:DataType="dockControls:Tool">
                        <ContentControl Content="{Binding Context}" />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:ErrorMessagesViewModel">
                        <tools:ErrorMessages />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:BuildOutputViewModel">
                        <tools:BuildOutput />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:DebugOutputViewModel">
                        <tools:DebugOutput />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:ErrorsOutputViewModel">
                        <tools:ErrorsOutput />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:RegistersViewModel">
                        <tools:Registers />
                    </DataTemplate>
                    <DataTemplate DataType="breakpoints:BreakpointsViewModel">
                        <tools:Breakpoints />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:MemoryViewerViewModel">
                        <tools:MemoryViewer />
                    </DataTemplate>
                    <DataTemplate DataType="tvm:CallStackViewModel">
                        <tools:CallStack />
                    </DataTemplate>
                    <DataTemplate x:DataType="vm:ProjectExplorerViewModel">
                        <v:ProjectExplorer />
                    </DataTemplate>
                    <DataTemplate x:DataType="docks:StartPageDockViewModel">
                        <mv:StartPage DataContext="{Binding Context}" />
                    </DataTemplate>
                </DockControl.DataTemplates>
            </DockControl>
            <v:StatusInfo Grid.Row="1" DataContext="{Binding StatusInfo}" HorizontalAlignment="Right"
                          VerticalAlignment="Bottom" Margin="0,0,4,4"/>
            <ContentControl Grid.Row="0" Grid.RowSpan="2" Content="{Binding OverlayContent}" />
        </Grid>
    </DockPanel>
</UserControl>